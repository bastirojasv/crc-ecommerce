import{a as $}from"./chunk-S4CNHZDQ.js";import{a as Z,b as U}from"./chunk-CWKA2RF5.js";import{A as C,B as p,C as d,I as l,J as S,K as T,L as F,M as O,N as b,O as y,P as I,V as E,W as V,Y as B,ba as N,ca as z,fa as A,g as w,ha as W,i as m,ia as j,j as _,ja as L,ma as D,p as k,pa as R,q as s,qa as H,r as h,ra as q,u as P,v as g,va as Y,w as f,x as i,y as c,z as M}from"./chunk-3NZJIHVT.js";function G(r,u){if(r&1){let e=C();i(0,"div",20)(1,"input",21),p("change",function(t){m(e);let o=d();return _(o.onCategoryChange(t))}),c(),i(2,"label",22),l(3),c()()}if(r&2){let e=u.$implicit,n=d();s(),g("id","cat-"+e.id)("value",e.id)("checked",n.selectedCategories.includes(e.id)),s(),g("for","cat-"+e.id),s(),T(" ",e.name," ")}}function J(r,u){r&1&&(i(0,"div",23)(1,"div",24),l(2,"\u{1F4E6}"),c(),i(3,"h3",25),l(4,"A\xFAn no tenemos productos disponibles"),c(),i(5,"p",26),l(6,"Estamos agregando productos. Te invitamos a volver pronto."),c(),i(7,"a",27),l(8,"Volver al inicio"),c()())}function K(r,u){if(r&1){let e=C();i(0,"div",29)(1,"app-product-card",30),p("viewProduct",function(){let t=m(e).$implicit,o=d(2);return _(o.openProduct(t))}),c()()}if(r&2){let e=u.$implicit;s(),g("product",e)}}function Q(r,u){if(r&1&&(i(0,"div",1),P(1,K,2,1,"div",28),c()),r&2){let e=d();s(),g("ngForOf",e.paginatedProducts)}}function X(r,u){if(r&1){let e=C();i(0,"li",33)(1,"a",34),p("click",function(){let t=m(e).$implicit,o=d(2);return _(o.goToPage(t))}),l(2),c()()}if(r&2){let e=u.$implicit,n=d(2);f("active",n.currentPage===e),s(2),S(e)}}function ee(r,u){if(r&1){let e=C();i(0,"div",31)(1,"nav")(2,"ul",32)(3,"li",33)(4,"a",34),p("click",function(){m(e);let t=d();return _(t.goToPage(1))}),i(5,"span"),l(6,"\xAB|"),c()()(),i(7,"li",33)(8,"a",34),p("click",function(){m(e);let t=d();return _(t.previousPage())}),i(9,"span"),l(10,"\xAB"),c()()(),P(11,X,3,3,"li",35),i(12,"li",33)(13,"a",34),p("click",function(){m(e);let t=d();return _(t.nextPage())}),i(14,"span"),l(15,"\xBB"),c()()(),i(16,"li",33)(17,"a",34),p("click",function(){m(e);let t=d();return _(t.goToPage(t.totalPages))}),i(18,"span"),l(19,"|\xBB"),c()()()()()()}if(r&2){let e=d();s(3),f("disabled",e.currentPage===1),s(4),f("disabled",e.currentPage===1),s(4),g("ngForOf",e.visiblePages),s(),f("disabled",e.currentPage===e.totalPages),s(4),f("disabled",e.currentPage===e.totalPages)}}function te(r,u){if(r&1&&(i(0,"div",36),l(1),c()),r&2){let e=d();s(),F(" Mostrando ",e.startItem," - ",e.endItem," de ",e.filteredProducts.length," productos ")}}var ue=(()=>{class r{constructor(e,n,t,o){this.productService=e,this.route=n,this.categoryService=t,this.titleService=o,this.inputFocused=!1,this.searchText="",this.sortOption="",this.selectedCategories=[],this.categories=[],this.currentPage=1,this.itemsPerPage=12,this.paginatedProducts=[],this.products=[],this.filteredProducts=[],this.currentCategoryName="",this.isMobile=!1}ngOnInit(){this.titleService.setTitle("Productos | CRC Comercial SPA"),this.categoryService.getCategories().subscribe(e=>{this.categories=e}),this.filteredProducts=[...this.products],this.updatePaginatedProducts(),this.productService.getProducts().subscribe(e=>{this.products=e,this.route.queryParams.subscribe(n=>{let t=+n.category;t?(this.selectedCategories=[t],this.filteredProducts=this.products.filter(o=>o.categoryId===t),this.categoryService.getCategories().subscribe(o=>{let a=o.find(v=>v.id===t);this.currentCategoryName=a?a.name:"Productos"})):(this.selectedCategories=[],this.filteredProducts=this.products,this.currentCategoryName="Todos los Productos"),this.route.queryParams.subscribe(o=>{let a=o.search;a&&(this.searchText=a,this.applyFilters())}),this.isMobile=window.innerWidth<768,this.updatePaginatedProducts()})})}openProduct(e){this.selectedProduct=e}closeProduct(){this.selectedProduct=void 0}updatePaginatedProducts(){let e=this.isMobile?3:5,n=(this.currentPage-1)*this.itemsPerPage,t=n+this.itemsPerPage;this.paginatedProducts=this.filteredProducts.slice(n,t)}get totalPages(){return Math.ceil(this.filteredProducts.length/this.itemsPerPage)}get startItem(){return(this.currentPage-1)*this.itemsPerPage+1}get endItem(){let e=this.currentPage*this.itemsPerPage;return e>this.filteredProducts.length?this.filteredProducts.length:e}get visiblePages(){let e=this.totalPages,n=this.currentPage,t=this.isMobile?3:5,o=Math.max(n-Math.floor(t/2),1),a=o+t-1;a>e&&(a=e,o=Math.max(a-t+1,1));let v=[];for(let x=o;x<=a;x++)v.push(x);return v}previousPage(){this.currentPage>1&&(this.currentPage--,this.updatePaginatedProducts())}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.updatePaginatedProducts())}goToPage(e){this.currentPage=e,this.updatePaginatedProducts()}applyFilters(){let e=[...this.products];this.searchText.trim()!==""&&(e=e.filter(n=>n.name.toLowerCase().includes(this.searchText.toLowerCase()))),this.selectedCategories.length>0&&(e=e.filter(n=>this.selectedCategories.includes(n.categoryId))),this.sortOption==="name-asc"?e.sort((n,t)=>n.name.localeCompare(t.name)):this.sortOption==="name-desc"&&e.sort((n,t)=>t.name.localeCompare(n.name)),this.filteredProducts=e,this.currentPage=1,this.updatePaginatedProducts()}onCategoryChange(e){let n=+e.target.value;e.target.checked?this.selectedCategories.push(n):this.selectedCategories=this.selectedCategories.filter(t=>t!==n),this.applyFilters()}clearFilters(){this.searchText="",this.sortOption="",this.selectedCategories=[],this.applyFilters()}onResize(){let e=this.isMobile;this.isMobile=window.innerWidth<768,e!==this.isMobile&&this.updatePaginatedProducts()}static{this.\u0275fac=function(n){return new(n||r)(h(U),h(z),h(Z),h(N))}}static{this.\u0275cmp=w({type:r,selectors:[["app-productos"]],hostBindings:function(n,t){n&1&&p("resize",function(){return t.onResize()},!1,k)},standalone:!0,features:[I],decls:25,vars:9,consts:[[1,"container"],[1,"row"],[1,"col-md-3","mb-4"],[1,"filter-container","p-3","rounded","shadow-sm"],[1,"mb-3"],[1,"input-icon"],[1,"fas","fa-search"],["type","text","placeholder","Busca un producto",1,"form-control","search-input",3,"ngModelChange","focus","blur","input","ngModel"],[1,"fa","fa-chevron-down"],[1,"form-control","sort-select",3,"ngModelChange","change","ngModel"],["value",""],["value","name-asc"],["value","name-desc"],["class","form-check mb-2",4,"ngFor","ngForOf"],[1,"btn","btn-outline-warning","w-100","mt-3",3,"click"],[1,"col-md-9"],["class","text-center py-5",4,"ngIf"],["class","row",4,"ngIf"],["class","d-flex justify-content-center mt-4",4,"ngIf"],["class","text-center my-3",4,"ngIf"],[1,"form-check","mb-2"],["type","checkbox",1,"form-check-input",3,"change","id","value","checked"],[1,"form-check-label",3,"for"],[1,"text-center","py-5"],[2,"font-size","64px"],[1,"mt-3"],[1,"text-muted"],["routerLink","/",1,"btn","btn-warning","mt-3","px-4"],["class","col-lg-3 col-md-4 col-sm-6 mb-4",4,"ngFor","ngForOf"],[1,"col-lg-3","col-md-4","col-sm-6","mb-4"],[3,"viewProduct","product"],[1,"d-flex","justify-content-center","mt-4"],[1,"pagination"],[1,"page-item"],[1,"page-link",3,"click"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"text-center","my-3"]],template:function(n,t){n&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),M(6,"i",6),i(7,"input",7),y("ngModelChange",function(a){return b(t.searchText,a)||(t.searchText=a),a}),p("focus",function(){return t.inputFocused=!0})("blur",function(){return t.inputFocused=!1})("input",function(){return t.applyFilters()}),c()()(),i(8,"div",5),M(9,"i",8),i(10,"select",9),y("ngModelChange",function(a){return b(t.sortOption,a)||(t.sortOption=a),a}),p("change",function(){return t.applyFilters()}),i(11,"option",10),l(12,"Ordenar por"),c(),i(13,"option",11),l(14,"Nombre A-Z"),c(),i(15,"option",12),l(16,"Nombre Z-A"),c()()(),P(17,G,4,5,"div",13),i(18,"button",14),p("click",function(){return t.clearFilters()}),l(19," Borrar Filtros "),c()()(),i(20,"div",15),P(21,J,9,0,"div",16)(22,Q,2,1,"div",17)(23,ee,20,9,"div",18),c(),P(24,te,2,3,"div",19),c()()),n&2&&(s(5),f("focused",t.inputFocused),s(2),O("ngModel",t.searchText),s(3),O("ngModel",t.sortOption),s(7),g("ngForOf",t.categories),s(4),g("ngIf",t.paginatedProducts.length===0),s(),g("ngIf",t.paginatedProducts.length>0),s(),g("ngIf",t.paginatedProducts.length>0),s(),g("ngIf",t.paginatedProducts.length>0))},dependencies:[$,B,E,V,Y,H,q,j,R,L,D,W,A],styles:['@charset "UTF-8";.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;list-style:none;padding-left:0}.pagination[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]{margin:0 5px}.pagination[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#fff;border:2px solid #fce434;color:#fce434;border-radius:50px;padding:8px 16px;transition:background-color .3s ease,transform .2s ease}.pagination[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]:hover{background-color:#fce434;color:#fff;transform:scale(1.05)}.pagination[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]:focus{box-shadow:none}.pagination[_ngcontent-%COMP%]   .page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#fce434;color:#fff;font-weight:700;transform:scale(1.1)}.pagination[_ngcontent-%COMP%]   .page-item.disabled[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed;pointer-events:none}.text-center[_ngcontent-%COMP%]{font-size:.9rem;color:#666}.text-center[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600}.text-center[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px;color:#666}.category-title[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:600;margin-bottom:1rem;padding-left:10px}.filter-container[_ngcontent-%COMP%]{background:#fff;border:1px solid #ddd;padding-left:1.5rem;position:relative;border-radius:.5rem}.filter-container[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]{padding-left:1.5rem;position:relative}.filter-container[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{position:relative;left:0;top:.5rem}.filter-container[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]   .form-check-label[_ngcontent-%COMP%]{font-size:.95rem;top:.5rem;position:relative;color:#333}.filter-container[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%] + .form-check[_ngcontent-%COMP%]{margin-top:.5rem}@media (max-width: 767px){.filter-container[_ngcontent-%COMP%]{position:static;margin-bottom:20px}}input.form-control[_ngcontent-%COMP%], select.form-control[_ngcontent-%COMP%]{border-radius:10px}.btn-link[_ngcontent-%COMP%]{font-size:.9rem}.input-icon[_ngcontent-%COMP%]{position:relative}.input-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;top:50%;left:12px;transform:translateY(-50%);color:#aaa;transition:all .3s ease;pointer-events:none}.input-icon[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{padding-left:35px;transition:all .3s ease}.input-icon.focused[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fce434;transform:translateY(-50%) scale(1.2)}.sort-select[_ngcontent-%COMP%]{padding-left:35px;appearance:none;background:none}.input-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{right:12px;left:auto}.btn-outline-warning[_ngcontent-%COMP%]{color:#e0c100;border-color:#e0c100}.btn-outline-warning[_ngcontent-%COMP%]:hover{background-color:#fce434;border:none;color:#fff}.row[_ngcontent-%COMP%]{margin:0 -10px}.col-lg-3[_ngcontent-%COMP%]{padding:0 10px}.container[_ngcontent-%COMP%]{max-width:1320px;margin:0 auto;padding:0 2rem}']})}}return r})();export{ue as ProductsComponent};
