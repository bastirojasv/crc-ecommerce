import{a as Y,b as G,c as J}from"./chunk-CWKA2RF5.js";import{A as x,B as f,C as g,I as d,J as y,K as M,M as k,N as S,O as T,P as V,Q as z,R as w,U as D,V as E,W as F,X as L,Y as j,ba as N,ca as $,fa as q,g as O,ha as Z,i as l,ia as A,j as m,ja as H,ma as R,n as I,o as v,oa as U,q as a,r as _,sa as W,u as h,v as s,va as B,w as P,wa as X,x as r,y as c,z as u}from"./chunk-3NZJIHVT.js";var Q=()=>["/products"],ee=o=>({category:o}),te=o=>({"btn-pulse":o});function ne(o,b){if(o&1&&(r(0,"li",5)(1,"a",10),d(2),c()()),o&2){let t=g();a(),s("routerLink",z(3,Q))("queryParams",w(4,ee,t.product==null?null:t.product.categoryId)),a(),M(" ",t.categoryName," ")}}function ie(o,b){if(o&1){let t=x();r(0,"button",30),f("click",function(e){l(t);let i=g(2);return m(i.prevImage(e))})("mouseenter",function(e){return l(t),m(e.stopPropagation())})("mouseleave",function(e){return l(t),m(e.stopPropagation())}),u(1,"i",31),c()}}function oe(o,b){if(o&1){let t=x();r(0,"button",32),f("click",function(e){l(t);let i=g(2);return m(i.nextImage(e))})("mouseenter",function(e){return l(t),m(e.stopPropagation())})("mouseleave",function(e){return l(t),m(e.stopPropagation())}),u(1,"i",33),c()}}function ae(o,b){if(o&1){let t=x();r(0,"img",34),f("click",function(){let e=l(t).$implicit,i=g(2);return m(i.onThumbnailClick(e))}),c()}if(o&2){let t=b.$implicit,n=g(2);P("active",t===n.selectedImage),s("src","assets/images/"+t,v)("alt",n.product.name)}}function re(o,b){if(o&1){let t=x();r(0,"div",35)(1,"div",36),f("click",function(){l(t);let e=g(2);return m(e.toggleCollapse())}),r(2,"h4",37),d(3,"Especificaci\xF3n T\xE9cnica"),c(),u(4,"i",38),c()()}if(o&2){let t=g(2);a(4),s("ngClass",t.isCollapsed?"fa-chevron-down":"fa-chevron-up")}}function ce(o,b){if(o&1){let t=x();r(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14)(4,"div",15),f("mousemove",function(e){l(t);let i=g();return m(i.onImageMouseMove(e))})("mouseleave",function(){l(t);let e=g();return m(e.onImageMouseLeave())}),h(5,ie,2,0,"button",16)(6,oe,2,0,"button",17),u(7,"img",18),c(),r(8,"div",19),h(9,ae,1,4,"img",20),c()()(),r(10,"div",13)(11,"h1",21),d(12),c(),u(13,"p",22),h(14,re,5,1,"div",23),r(15,"div",24)(16,"p",25),d(17),c()(),r(18,"div",26)(19,"input",27),T("ngModelChange",function(e){l(t);let i=g();return S(i.quantity,e)||(i.quantity=e),m(e)}),c(),r(20,"button",28),f("click",function(){l(t);let e=g();return m(e.addToCart())}),u(21,"i",29),d(22," A\xF1adir al carrito "),c()()()()()}if(o&2){let t,n,e=g();a(4),s("ngStyle",e.mainImageZoomStyle),a(),s("ngIf",((t=e.product==null||e.product.images==null?null:e.product.images.length)!==null&&t!==void 0?t:0)>1),a(),s("ngIf",((n=e.product==null||e.product.images==null?null:e.product.images.length)!==null&&n!==void 0?n:0)>1),a(),P("fade-in",e.fadeIn),s("src","assets/images/"+e.selectedImage,v)("alt",e.product.name),a(2),s("ngForOf",e.product.images),a(3),y(e.product.name),a(),s("innerHTML",e.formattedDescription,I),a(),s("ngIf",e.product.technicalDetails&&e.product.technicalDetails.trim()!==""),a(),P("show",!e.isCollapsed),a(2),y(e.product.technicalDetails),a(2),k("ngModel",e.quantity),a(),s("ngClass",w(16,te,e.btnPulse))}}var Ce=(()=>{class o{constructor(t,n,e,i,p,C){this.route=t,this.productService=n,this.categoryService=e,this.cartService=i,this.app=p,this.titleService=C,this.isCollapsed=!0,this.categoryName="",this.selectedImage="",this.quantity=1,this.btnPulse=!1,this.mainImageZoomStyle={},this.fadeIn=!1}ngOnInit(){this.route.paramMap.subscribe(t=>{let n=+t.get("id");this.productService.getProducts().subscribe(e=>{let i=e.find(p=>p.id===n);i&&(this.product=i,this.selectedImage=i.images[0],this.titleService.setTitle(`${i.name} | CRC Comercial SPA`),this.categoryService.getCategories().subscribe(p=>{let C=p.find(K=>K.id===i.categoryId);C&&(this.categoryName=C.name)}),this.mainImageZoomStyle={backgroundImage:`url('assets/images/${i.images[0]}')`,backgroundPosition:"center",backgroundSize:"contain"})})}),this.mainImageZoomStyle={backgroundImage:"",backgroundPosition:"center",backgroundSize:"100% 100%"}}get formattedDescription(){return this.product?.description?this.product.description.replace(/\n/g,"<br>"):""}toggleCollapse(){this.isCollapsed=!this.isCollapsed}addToCart(){this.product&&(this.cartService.addToCart(this.product,this.quantity),this.app.showToast(`${this.quantity} \xD7 ${this.product.name} a\xF1adido al carrito`),this.btnPulse=!0,setTimeout(()=>this.btnPulse=!1,300))}onThumbnailClick(t){this.fadeIn=!1,setTimeout(()=>{this.selectedImage=t,this.mainImageZoomStyle={backgroundImage:`url('assets/images/${t}')`,backgroundPosition:"center",backgroundSize:"contain"},this.fadeIn=!0},10)}onImageMouseMove(t){let n=t.target;if(n.classList.contains("carousel-arrow")||n.closest(".carousel-arrow")){this.mainImageZoomStyle={backgroundImage:`url('assets/images/${this.selectedImage}')`,backgroundPosition:"center",backgroundSize:"contain"};return}let e=t.currentTarget.getBoundingClientRect(),i=(t.clientX-e.left)/e.width*100,p=(t.clientY-e.top)/e.height*100;this.mainImageZoomStyle={backgroundImage:`url('assets/images/${this.selectedImage}')`,backgroundPosition:`${i}% ${p}%`,backgroundSize:"180% 180%"}}onImageMouseLeave(){this.mainImageZoomStyle={backgroundImage:`url('assets/images/${this.selectedImage}')`,backgroundPosition:"center",backgroundSize:"contain"}}prevImage(t){t.stopPropagation();let n=t.target;if(n instanceof HTMLElement&&n.blur(),!this.product)return;let i=(this.product.images.indexOf(this.selectedImage)-1+this.product.images.length)%this.product.images.length;this.onThumbnailClick(this.product.images[i])}nextImage(t){t.stopPropagation();let n=t.target;if(n instanceof HTMLElement&&n.blur(),!this.product)return;let i=(this.product.images.indexOf(this.selectedImage)+1)%this.product.images.length;this.onThumbnailClick(this.product.images[i])}static{this.\u0275fac=function(n){return new(n||o)(_($),_(G),_(Y),_(X),_(J),_(N))}}static{this.\u0275cmp=O({type:o,selectors:[["app-product-detail-page"]],standalone:!0,features:[V],decls:13,vars:3,consts:[[1,"mb-4"],["routerLink","/products",1,"btn","btn-outline-warning"],[1,"fas","fa-arrow-left","me-2"],[1,"breadcrumb-nav","mb-4"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/"],["class","breadcrumb-item",4,"ngIf"],["aria-current","page",1,"breadcrumb-item","active"],["class","container my-5",4,"ngIf"],[3,"routerLink","queryParams"],[1,"container","my-5"],[1,"row"],[1,"col-md-6"],[1,"image-gallery"],[1,"main-image-zoom",3,"mousemove","mouseleave","ngStyle"],["class","carousel-arrow left","aria-label","Imagen anterior","type","button",3,"click","mouseenter","mouseleave",4,"ngIf"],["class","carousel-arrow right","aria-label","Imagen siguiente","type","button",3,"click","mouseenter","mouseleave",4,"ngIf"],["draggable","false",1,"img-fluid","rounded","main-image","mb-3","fade-image",2,"pointer-events","none","opacity","0",3,"src","alt"],[1,"thumbs","d-flex","flex-wrap","gap-2"],["class","thumb-image",3,"src","alt","active","click",4,"ngFor","ngForOf"],[1,"product-title"],[1,"product-description",3,"innerHTML"],["class","collapse-box mt-4",4,"ngIf"],[1,"collapse-body"],[1,"mt-3"],[1,"mt-4","d-flex","align-items-center","gap-3"],["type","number","min","1",1,"form-control","w-auto",2,"max-width","80px",3,"ngModelChange","ngModel"],[1,"btn","btn-warning",3,"click","ngClass"],[1,"fas","fa-cart-plus","me-2"],["aria-label","Imagen anterior","type","button",1,"carousel-arrow","left",3,"click","mouseenter","mouseleave"],[1,"fas","fa-chevron-left"],["aria-label","Imagen siguiente","type","button",1,"carousel-arrow","right",3,"click","mouseenter","mouseleave"],[1,"fas","fa-chevron-right"],[1,"thumb-image",3,"click","src","alt"],[1,"collapse-box","mt-4"],[1,"collapse-header","d-flex","justify-content-between","align-items-center",3,"click"],[1,"mb-0"],[1,"fas",2,"color","#fce434",3,"ngClass"]],template:function(n,e){n&1&&(r(0,"div",0)(1,"a",1),u(2,"i",2),d(3," Volver a productos "),c()(),r(4,"nav",3)(5,"ol",4)(6,"li",5)(7,"a",6),d(8,"Inicio"),c()(),h(9,ne,3,6,"li",7),r(10,"li",8),d(11),c()()(),h(12,ce,23,18,"div",9)),n&2&&(a(9),s("ngIf",e.categoryName),a(2),M(" ",e.product==null?null:e.product.name," "),a(),s("ngIf",e.product))},dependencies:[j,D,E,F,L,Z,q,B,A,U,H,W,R],styles:['@charset "UTF-8";.product-title[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:700;color:#222;letter-spacing:-1px;margin-bottom:.5rem;line-height:1.1;text-shadow:0 2px 8px rgba(252,228,52,.08)}.product-description[_ngcontent-%COMP%]{font-size:1.15rem;color:#444;background:#fffbe7;border-left:4px solid #fce434;border-radius:8px;padding:1.2rem 1.5rem;margin-bottom:1.5rem;box-shadow:0 1px 8px #fce4340f;white-space:pre-line;transition:background .2s}.product-description[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#c59d00}.product-description[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{color:#888;font-style:italic}.collapse-box[_ngcontent-%COMP%]{border-top:1px solid #ddd;padding-top:1rem}.collapse-box[_ngcontent-%COMP%]   .collapse-header[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none}.collapse-box[_ngcontent-%COMP%]   .collapse-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ff9800;font-size:1.2rem;transition:transform .3s ease}.collapse-box[_ngcontent-%COMP%]   .collapse-body[_ngcontent-%COMP%]{display:none;transition:all .3s ease}.collapse-box[_ngcontent-%COMP%]   .collapse-body.show[_ngcontent-%COMP%]{display:block}.btn-outline-warning[_ngcontent-%COMP%]{font-weight:500;border-radius:25px}.breadcrumb-nav[_ngcontent-%COMP%]{background-color:#f9f9f9;border-radius:8px;padding:.75rem 1rem;font-size:.9rem}.image-gallery[_ngcontent-%COMP%]{padding:32px 24px;display:flex;flex-direction:column;align-items:center}.image-gallery[_ngcontent-%COMP%]   .main-image[_ngcontent-%COMP%]{width:450px;height:450px;display:flex;align-items:center;justify-content:center;object-fit:contain;border-radius:12px;box-shadow:0 2px 16px #0000001a;max-width:100%;max-height:500px;margin-bottom:18px;transition:box-shadow .2s,transform .4s cubic-bezier(.4,0,.2,1);cursor:zoom-in}.image-gallery[_ngcontent-%COMP%]   .main-image[_ngcontent-%COMP%]:hover{transform:scale(1.18);z-index:2;box-shadow:0 8px 32px #0000002e}.image-gallery[_ngcontent-%COMP%]   .main-image-zoom[_ngcontent-%COMP%]{width:380px;height:380px;border-radius:12px;box-shadow:0 2px 16px #0000001a;margin-bottom:18px;background-repeat:no-repeat;background-size:180% 180%;background-position:center;cursor:zoom-in;transition:box-shadow .2s;position:relative;overflow:hidden}.image-gallery[_ngcontent-%COMP%]   .main-image-zoom[_ngcontent-%COMP%]   .carousel-arrow[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background:#ffffffb8;border:none;border-radius:50%;width:38px;height:38px;display:flex;align-items:center;justify-content:center;color:#222;font-size:1.3rem;box-shadow:0 2px 8px #0000001a;cursor:pointer;opacity:.85;transition:background .2s,color .2s,opacity .2s;z-index:3;outline:none;padding:0}.image-gallery[_ngcontent-%COMP%]   .main-image-zoom[_ngcontent-%COMP%]   .carousel-arrow[_ngcontent-%COMP%]:hover, .image-gallery[_ngcontent-%COMP%]   .main-image-zoom[_ngcontent-%COMP%]   .carousel-arrow[_ngcontent-%COMP%]:focus{background:#fce434;color:#222;opacity:1}.image-gallery[_ngcontent-%COMP%]   .main-image-zoom[_ngcontent-%COMP%]   .carousel-arrow.left[_ngcontent-%COMP%]{left:14px}.image-gallery[_ngcontent-%COMP%]   .main-image-zoom[_ngcontent-%COMP%]   .carousel-arrow.right[_ngcontent-%COMP%]{right:14px}.image-gallery[_ngcontent-%COMP%]   .thumbs[_ngcontent-%COMP%]{gap:10px!important}.image-gallery[_ngcontent-%COMP%]   .thumb-image[_ngcontent-%COMP%]{width:64px;height:64px;object-fit:contain;border-radius:8px;border:2px solid transparent;background:#fff;box-shadow:0 1px 6px #0000000f;cursor:pointer;transition:border .2s,box-shadow .2s}.image-gallery[_ngcontent-%COMP%]   .thumb-image[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.image-gallery[_ngcontent-%COMP%]   .thumb-image.active[_ngcontent-%COMP%], .image-gallery[_ngcontent-%COMP%]   .thumb-image[_ngcontent-%COMP%]:hover{border:2px solid #fce434;box-shadow:0 2px 12px #fce43426}@media (max-width: 768px){.image-gallery[_ngcontent-%COMP%]   .main-image[_ngcontent-%COMP%]{width:100%;height:220px}.image-gallery[_ngcontent-%COMP%]   .main-image-zoom[_ngcontent-%COMP%]{width:100%;height:220px;background-size:200% 200%}.image-gallery[_ngcontent-%COMP%]   .thumbs[_ngcontent-%COMP%]{flex-wrap:nowrap;overflow-x:auto}.image-gallery[_ngcontent-%COMP%]   .thumb-image[_ngcontent-%COMP%]{flex:0 0 auto}}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}40%{transform:scale(1.05)}to{transform:scale(1)}}.image-gallery[_ngcontent-%COMP%]   .btn-pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse .3s ease}.btn-outline-warning[_ngcontent-%COMP%]{color:#e0c100;border-color:#e0c100}.btn-outline-warning[_ngcontent-%COMP%]:hover, .btn-warning[_ngcontent-%COMP%]{background-color:#fce434;border:none;color:#fff}.btn-warning[_ngcontent-%COMP%]:hover{background-color:#e0c100}.fade-image[_ngcontent-%COMP%]{opacity:0;transition:opacity .4s cubic-bezier(.4,0,.2,1)}.fade-image.fade-in[_ngcontent-%COMP%]{opacity:1}.carousel-arrow[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}']})}}return o})();export{Ce as ProductDetailPageComponent};
