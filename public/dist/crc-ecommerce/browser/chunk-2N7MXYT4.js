import{c as N,i as Y}from"./chunk-IQ47MOWU.js";import{a as Z,b as q,c as R}from"./chunk-2GVPL6EH.js";import{A as j,B as z,C as D,F as L,k as I,l as E,m as V,t as B,u as A,x as W}from"./chunk-PX452HKO.js";import{$a as T,Aa as v,Ma as f,Pa as p,Qa as u,Ra as i,Sa as a,Ta as O,Ua as h,Va as d,Wa as g,Ya as l,Za as y,_ as k,_a as w,ab as b,bb as x,cb as S,eb as F,ga as _,ha as P,za as r}from"./chunk-PSJPITZJ.js";function U(s,m){if(s&1){let t=h();i(0,"div",25)(1,"input",26),d("change",function(e){_(t);let o=g();return P(o.onCategoryChange(e))}),a(),i(2,"label",27),l(3),a()()}if(s&2){let t=m.$implicit;r(),p("id","cat-"+t.id)("value",t.id),r(),p("for","cat-"+t.id),r(),w(" ",t.name," ")}}function $(s,m){if(s&1){let t=h();i(0,"div",28)(1,"app-product-card",29),d("viewProduct",function(){let e=_(t).$implicit,o=g();return P(o.openProduct(e))}),a()()}if(s&2){let t=m.$implicit;r(),p("product",t)}}function G(s,m){if(s&1){let t=h();i(0,"li",20)(1,"a",21),d("click",function(){let e=_(t).$implicit,o=g();return P(o.goToPage(e))}),l(2),a()()}if(s&2){let t=m.$implicit,n=g();u("active",n.currentPage===t),r(2),y(t)}}function H(s,m){if(s&1){let t=h();i(0,"app-product-detail",30),d("closed",function(){_(t);let e=g();return P(e.closeProduct())}),a()}if(s&2){let t=g();p("product",t.selectedProduct)}}var ae=(()=>{class s{constructor(t,n,e){this.productService=t,this.route=n,this.categoryService=e,this.inputFocused=!1,this.searchText="",this.sortOption="",this.selectedCategories=[],this.categories=[],this.currentPage=1,this.itemsPerPage=9,this.paginatedProducts=[],this.products=[],this.filteredProducts=[],this.currentCategoryName=""}ngOnInit(){this.productService.getProducts().subscribe(t=>{this.products=t,this.route.queryParams.subscribe(n=>{let e=+n.category;e?(this.filteredProducts=this.products.filter(o=>o.categoryId===e),this.categoryService.getCategories().subscribe(o=>{let c=o.find(C=>C.id===e);this.currentCategoryName=c?c.name:"Productos"})):(this.filteredProducts=this.products,this.currentCategoryName="Todos los Productos"),this.updatePaginatedProducts()})})}openProduct(t){this.selectedProduct=t}closeProduct(){this.selectedProduct=void 0}updatePaginatedProducts(){let t=(this.currentPage-1)*this.itemsPerPage,n=t+this.itemsPerPage;this.paginatedProducts=this.filteredProducts.slice(t,n)}get totalPages(){return Math.ceil(this.filteredProducts.length/this.itemsPerPage)}get startItem(){return(this.currentPage-1)*this.itemsPerPage+1}get endItem(){let t=this.currentPage*this.itemsPerPage;return t>this.filteredProducts.length?this.filteredProducts.length:t}get visiblePages(){let t=this.totalPages,n=this.currentPage,e=5,o=Math.max(n-Math.floor(e/2),1),c=o+e-1;c>t&&(c=t,o=Math.max(c-e+1,1));let C=[];for(let M=o;M<=c;M++)C.push(M);return C}previousPage(){this.currentPage>1&&(this.currentPage--,this.updatePaginatedProducts())}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.updatePaginatedProducts())}goToPage(t){this.currentPage=t,this.updatePaginatedProducts()}applyFilters(){let t=[...this.products];this.searchText.trim()!==""&&(t=t.filter(n=>n.name.toLowerCase().includes(this.searchText.toLowerCase()))),this.selectedCategories.length>0&&(t=t.filter(n=>this.selectedCategories.includes(n.categoryId))),this.sortOption==="name-asc"?t.sort((n,e)=>n.name.localeCompare(e.name)):this.sortOption==="name-desc"&&t.sort((n,e)=>e.name.localeCompare(n.name)),this.filteredProducts=t,this.currentPage=1,this.updatePaginatedProducts()}onCategoryChange(t){let n=+t.target.value;t.target.checked?this.selectedCategories.push(n):this.selectedCategories=this.selectedCategories.filter(e=>e!==n),this.applyFilters()}clearFilters(){this.searchText="",this.sortOption="",this.selectedCategories=[],this.applyFilters()}static{this.\u0275fac=function(n){return new(n||s)(v(q),v(N),v(Y))}}static{this.\u0275cmp=k({type:s,selectors:[["app-productos"]],standalone:!0,features:[F],decls:48,vars:20,consts:[[1,"my-5"],[1,"category-title"],[1,"row"],[1,"col-md-3","mb-4"],[1,"filter-container","p-3","rounded","shadow-sm"],[1,"mb-3"],[1,"input-icon"],[1,"fas","fa-search"],["type","text","placeholder","Busca un producto",1,"form-control","search-input",3,"ngModelChange","focus","blur","input","ngModel"],[1,"fa","fa-chevron-down"],[1,"form-control","sort-select",3,"ngModelChange","change","ngModel"],["value",""],["value","name-asc"],["value","name-desc"],["class","form-check mb-2",4,"ngFor","ngForOf"],[1,"btn","btn-outline-warning","w-100","mt-3",3,"click"],[1,"col-md-9"],["class","col-md-4 mb-4",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-4"],[1,"pagination"],[1,"page-item"],[1,"page-link",3,"click"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"text-center","my-3"],[3,"product","closed",4,"ngIf"],[1,"form-check","mb-2"],["type","checkbox",1,"form-check-input",3,"change","id","value"],[1,"form-check-label",3,"for"],[1,"col-md-4","mb-4"],[3,"viewProduct","product"],[3,"closed","product"]],template:function(n,e){n&1&&(i(0,"div",0)(1,"h2",1),l(2),a()(),i(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6),O(8,"i",7),i(9,"input",8),S("ngModelChange",function(c){return x(e.searchText,c)||(e.searchText=c),c}),d("focus",function(){return e.inputFocused=!0})("blur",function(){return e.inputFocused=!1})("input",function(){return e.applyFilters()}),a()()(),i(10,"div",6),O(11,"i",9),i(12,"select",10),S("ngModelChange",function(c){return x(e.sortOption,c)||(e.sortOption=c),c}),d("change",function(){return e.applyFilters()}),i(13,"option",11),l(14,"Ordenar por"),a(),i(15,"option",12),l(16,"Nombre A-Z"),a(),i(17,"option",13),l(18,"Nombre Z-A"),a()()(),f(19,U,4,4,"div",14),i(20,"button",15),d("click",function(){return e.clearFilters()}),l(21," Borrar Filtros "),a()()(),i(22,"div",16)(23,"div",2),f(24,$,2,1,"div",17),a(),i(25,"div",18)(26,"nav")(27,"ul",19)(28,"li",20)(29,"a",21),d("click",function(){return e.goToPage(1)}),i(30,"span"),l(31,"\xAB|"),a()()(),i(32,"li",20)(33,"a",21),d("click",function(){return e.previousPage()}),i(34,"span"),l(35,"\xAB"),a()()(),f(36,G,3,3,"li",22),i(37,"li",20)(38,"a",21),d("click",function(){return e.nextPage()}),i(39,"span"),l(40,"\xBB"),a()()(),i(41,"li",20)(42,"a",21),d("click",function(){return e.goToPage(e.totalPages)}),i(43,"span"),l(44,"|\xBB"),a()()()()()()(),i(45,"div",23),l(46),a(),f(47,H,1,1,"app-product-detail",24),a()),n&2&&(r(2),y(e.currentCategoryName||"Todos los Productos"),r(5),u("focused",e.inputFocused),r(2),b("ngModel",e.searchText),r(3),b("ngModel",e.sortOption),r(7),p("ngForOf",e.categories),r(5),p("ngForOf",e.paginatedProducts),r(4),u("disabled",e.currentPage===1),r(4),u("disabled",e.currentPage===1),r(4),p("ngForOf",e.visiblePages),r(),u("disabled",e.currentPage===e.totalPages),r(4),u("disabled",e.currentPage===e.totalPages),r(5),T(" Mostrando ",e.startItem," - ",e.endItem," de ",e.filteredProducts.length,` productos
`),r(),p("ngIf",e.selectedProduct))},dependencies:[Z,V,I,E,R,L,z,D,B,j,A,W],styles:['@charset "UTF-8";.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;list-style:none;padding-left:0}.pagination[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]{margin:0 5px}.pagination[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#fff;border:2px solid #FF9800;color:#ff9800;border-radius:50px;padding:8px 16px;transition:background-color .3s ease,transform .2s ease}.pagination[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]:hover{background-color:#ff9800;color:#fff;transform:scale(1.05)}.pagination[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]:focus{box-shadow:none}.pagination[_ngcontent-%COMP%]   .page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#ff9800;color:#fff;font-weight:700;transform:scale(1.1)}.pagination[_ngcontent-%COMP%]   .page-item.disabled[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed;pointer-events:none}.text-center[_ngcontent-%COMP%]{font-size:.9rem;color:#666}.category-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#212121}.filter-container[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:12px;position:sticky;top:100px;background-color:#f9f9f9}@media (max-width: 767px){.filter-container[_ngcontent-%COMP%]{position:static;margin-bottom:20px}}input.form-control[_ngcontent-%COMP%], select.form-control[_ngcontent-%COMP%]{border-radius:10px}.form-check-label[_ngcontent-%COMP%]{font-size:.95rem}.btn-link[_ngcontent-%COMP%]{font-size:.9rem}.input-icon[_ngcontent-%COMP%]{position:relative}.input-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;top:50%;left:12px;transform:translateY(-50%);color:#aaa;transition:all .3s ease;pointer-events:none}.input-icon[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{padding-left:35px;transition:all .3s ease}.input-icon.focused[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ff9800;transform:translateY(-50%) scale(1.2)}.sort-select[_ngcontent-%COMP%]{padding-left:35px;appearance:none;background:none}.input-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{right:12px;left:auto}']})}}return s})();export{ae as ProductsComponent};
